@model DAL.ViewModel.Provider
@{
    ViewData["Title"] = "Provider";
    Layout = "~/Views/Shared/_AdminDash.cshtml";
}



@* --------------------- *@
@* --------------------- *@

<div class="modal fade" id="ContactProviderModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header bg-info">
                <h5 class="modal-title text-white" id="exampleModalLongTitle">Contact Your Provider</h5>
                <a data-bs-dismiss="modal">
                    <svg height="20px" id="Layer_1" style="enable-background:new 0 0 512 512;" fill="white" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z" /></svg>
                </a>
            </div>
            <form id="ContactProviderModalSubmit" asp-action="SendEmailSMS">
                <div class="modal-body">
                    <span>Choose communication to send message.</span>
                    <div class="modal-flex  justify-content-center my-3">
                        <input id="physicianid" name="id" hidden />

                        <div class="form-check">
                            <input  type="radio" class="form-check-input border" name="radioForprovider" value="1" id="radio1">Email
                            <label class="form-check-label" for="radio1"></label>
                        </div>
                        <div class="form-check">
                            <input type="radio" class="form-check-input border" name="radioForprovider" value="2" id="radio2">SMS
                            <label class="form-check-label" for="radio2"></label>
                        </div>
                        <div class="form-check">
                            <input type="radio" class="form-check-input border" name="radioForprovider" value="3" id="radio3">Both
                            <label class="form-check-label" for="radio3"></label>
                        </div>

                        <div class="form-floating mt-3 temp">
                            <textarea style="height: 100px;" type="text" name="Message" class="form-control inputs" id="messageForProvider"></textarea>
                            <label for="messageForProvider" class="input_labels">Message</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" id="contactProviderSubmitBtn" class="btn btn-info text-white" data-bs-dismiss="modal">Submit</button>
                    <button type="reset" class="btn btn-outline-info cancel-btn" data-bs-dismiss="modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>



@* --------------------- *@
<div class="container-fluid  bg-body-secondary">

    <div class="container " style="height:80vh !important">
    <div class="justify-content-between d-flex  container-fluid mb-2 position-relative ">
        <div class="mt-3">
            <h3> Provider Information </h3>
        </div>
        <div>
            <a asp-action="AdminDash" class="btn btn-outline-info mt-3"> ❮  Back </a>
        </div>
    </div>
    <div class="card border-0 shadow p-4 mb-5 rounded">
        <div class="row justify-content-between ps-3">

            <div class="d-flex  border border-secondary  rounded align-items-center mx-sm-2 ps-2 my-2 col-3">
                <select class="form-control border-0 shadow-none " id="regiondropdown">
                    <option value=" ">All Region</option>
                    @foreach (var state in Model.regions)
                    {
                        <option value="@state.RegionId">@state.Name</option>
                    }
                </select>
                
            </div>
            <div class="d-flex col-3 mr-0 py-2 justify-content-end">
                    <a asp-action="CreateProviderAccount" class="btn btn-outline-info mx-2" style="width:fit-content">
                    <span>Create Provider Account</span>
                </a>
            </div>

        </div>

        <div class="my-3 table-responsive" id="ProviderPartial">
        </div>

    </div>
</div>
</div>  
<script src="~/js/AdminProvider.js"></script>
@* --------------------- *@


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
     $(document).ready(function () { 

         console.log("sabnjsabx")
     GetProviders();                          
 })
    $("#regiondropdown").on("change", function () {
        console.log("1234")
        GetProviders();
 });

    function GetProviders() {
     var region = $("#regiondropdown").val();
     console.log(region)
     $.ajax({
         method: "GET",
         url: "/AdminDash/ProvidersData",
         data: { region: region },
         success: function (response) {
             if (response.code == 401) {

                 location.reload();
             }
             else {
                 console.log("SuccessFully Executed")
                    $('#ProviderPartial').html(response)
                
             }

         },
         error: function () {
             console.log("Error")
         }
     })
 }
</script>